void 0===Craft.Cloner&&(Craft.Cloner={}),function(t){Craft.Cloner=Garnish.Base.extend({$table:null,title:null,action:null,init:function(e){this.$table=t("table#"+e.id),this.title="New "+e.title+" Name",this.action="cloner/"+e.action,this.setupTable()},setupTable:function(){var e=this;this.$table.length&&(this.$table.find("thead tr").each(function(){var e=t(this).find("td.thin:first");if(e.length){var a=t('<td class="thin"></td>');e.before(a)}else t(this).append('<td class="thin"></td>')}),this.$table.find("tbody tr").each(function(){var a=t(this).find("td.thin:first"),n=t('<a class="add icon"></a>');if(a.length){var i=t('<td class="thin"></td>').html(n);a.before(i)}else{var i=t('<td class="thin"></td>').html(n);t(this).append(i)}e.addListener(n,"click","onCloneButtonClick")}))},onCloneButtonClick:function(e){e.preventDefault();var a,n=t(e.currentTarget).parents("tr").data("id"),i;if(i=prompt(this.title)){var r={id:n,name:i,handle:this.generateHandle(i)};Craft.postActionRequest(this.action,r,t.proxy(function(t,e){window.location.reload()},this))}},generateHandle:function(t){var e;e=(e=(e=t.replace("/<(.*?)>/g","")).replace(/['"‘’“”\[\]\(\)\{\}:]/g,"")).toLowerCase(),e=(e=Craft.asciiString(e)).replace(/^[^a-z]+/,"");for(var a=Craft.filterArray(e.split(/[^a-z0-9]+/)),e="",n=0;n<a.length;n++)e+=0==n?a[n]:a[n].charAt(0).toUpperCase()+a[n].substr(1);return e}})}(jQuery);
//# sourceMappingURL=cloner.js.map